<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÑÿπÿ®ÿ© ÿ™ÿπŸÑŸäŸÖ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ üî¢</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            text-align: center;
            margin: 0;
            padding: 20px;
            color: #333;
            user-select: none;
            min-height: 100vh;
        }
        h1 {
            color: #6a5acd;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .game-container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .game-container::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            z-index: -1;
            border-radius: 35px;
            opacity: 0.3;
        }
        .number-display {
            font-size: 8em;
            margin: 20px 0;
            color: #6a5acd;
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .number-display:hover {
            transform: scale(1.05);
        }
        .quantity-display {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            min-height: 60px;
        }
        .quantity-item {
            font-size: 2em;
            transition: all 0.3s;
        }
        .options-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        .number-option {
            background: #fdcb6e;
            color: white;
            font-size: 3em;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            aspect-ratio: 1/1;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .number-option::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(rgba(255,255,255,0.3), rgba(255,255,255,0));
            transform: rotate(45deg);
            transition: all 0.3s;
            opacity: 0;
        }
        .number-option:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .number-option:hover::before {
            opacity: 1;
            animation: shine 1.5s infinite;
        }
        @keyframes shine {
            0% { transform: rotate(45deg) translate(-30%, -30%); }
            100% { transform: rotate(45deg) translate(30%, 30%); }
        }
        .language-toggle {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .toggle-btn {
            background: #6a5acd;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .toggle-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .toggle-btn.active {
            background: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
        }
        .stars-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .star-icon {
            font-size: 2em;
            color: #fdcb6e;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .star-icon.empty {
            color: #ddd;
        }
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .notification.error {
            background: #ff7675;
        }
        .progress-container {
            width: 100%;
            height: 20px;
            background: #f3f3f3;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #6a5acd, #a29bfe);
            width: 0%;
            transition: width 0.5s ease-out;
            position: relative;
            overflow: hidden;
        }
        .progress-bar::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.6) 50%, 
                rgba(255,255,255,0) 100%);
            animation: progressShine 2s infinite;
        }
        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .level-display {
            font-size: 1.2em;
            margin: 10px 0;
            color: #6a5acd;
            font-weight: bold;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            border-radius: 50%;
            animation: confettiFall 5s linear forwards;
        }
        #number-display {
    display: none;
}

        @keyframes confettiFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(1000px) rotate(720deg); opacity: 0; }
        }
        .game-menu {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .menu-btn {
            background: #6a5acd;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .menu-btn:hover {
            background: #5a4abd;
            transform: translateY(-2px);
        }
        .trophy-icon {
            font-size: 1.5em;
            margin-left: 10px;
        }
        @media (max-width: 600px) {
            .options-container {
                grid-template-columns: repeat(3, 1fr);
            }
            .number-display {
                font-size: 5em;
                height: 100px;
            }
            .toggle-btn {
                padding: 10px 15px;
                font-size: 1em;
            }
        }
        @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-5px); }
    40%, 80% { transform: translateX(5px); }
}
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ŸÑÿπÿ®ÿ© ÿ™ÿπŸÑŸäŸÖ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ üî¢ <span class="trophy-icon">üèÜ</span></h1>
        
        <div class="level-display">ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ: <span id="level-text">1</span></div>
        
        <div class="game-menu">
            <button class="menu-btn" id="help-btn">ŸÖÿ≥ÿßÿπÿØÿ© ‚ÑπÔ∏è</button>
            <button class="menu-btn" id="sound-btn">ÿßŸÑÿµŸàÿ™ üîà</button>
            <button class="menu-btn" id="reset-btn">ÿ•ÿπÿßÿØÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ üîÑ</button>
        </div>
        
        <div class="language-toggle">
            <button class="toggle-btn active" id="arabic-btn">ÿπÿ±ÿ®Ÿä üá∏üá¶</button>
            <button class="toggle-btn" id="english-btn">English üá¨üáß</button>
        </div>
        
        <div class="number-display" id="number-display">Ÿ†</div>
        
        <div class="quantity-display" id="quantity-display">
            <!-- Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑŸÉŸÖŸäÿßÿ™ ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿßŸã -->
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div class="stars-container" id="stars-container">
            <div class="star-icon">‚≠ê</div>
            <div class="star-icon">‚≠ê</div>
            <div class="star-icon">‚≠ê</div>
        </div>
        
        <div class="options-container" id="options-container">
            <!-- Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿßŸã -->
        </div>
        
        <div id="notification" class="notification"></div>
        
        <audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-02.mp3"></audio>
        <audio id="error-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
        <audio id="levelup-sound" src="https://www.soundjay.com/buttons/sounds/button-21.mp3"></audio>
        <audio id="number-sound-ar"></audio>
        <audio id="number-sound-en"></audio>
    </div>

    <script>
        // ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸàÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ© ŸÖÿπ ÿ•ŸäŸÖŸàÿ¨Ÿäÿ≤ ÿ™ŸÖÿ´ŸÑ ÿßŸÑŸÉŸÖŸäÿßÿ™
const numbers = [
    { arabic: 'Ÿ†', english: '0', wordAr: 'ÿµŸÅÿ±', wordEn: 'Zero', image: '' },
    { arabic: 'Ÿ°', english: '1', wordAr: 'Ÿàÿßÿ≠ÿØ', wordEn: 'One', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">' },
    { arabic: 'Ÿ¢', english: '2', wordAr: 'ÿßÿ´ŸÜÿßŸÜ', wordEn: 'Two', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(2) },
    { arabic: 'Ÿ£', english: '3', wordAr: 'ÿ´ŸÑÿßÿ´ÿ©', wordEn: 'Three', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(3) },
    { arabic: 'Ÿ§', english: '4', wordAr: 'ÿ£ÿ±ÿ®ÿπÿ©', wordEn: 'Four', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(4) },
    { arabic: 'Ÿ•', english: '5', wordAr: 'ÿÆŸÖÿ≥ÿ©', wordEn: 'Five', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(5) },
    { arabic: 'Ÿ¶', english: '6', wordAr: 'ÿ≥ÿ™ÿ©', wordEn: 'Six', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(6) },
    { arabic: 'Ÿß', english: '7', wordAr: 'ÿ≥ÿ®ÿπÿ©', wordEn: 'Seven', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(7) },
    { arabic: 'Ÿ®', english: '8', wordAr: 'ÿ´ŸÖÿßŸÜŸäÿ©', wordEn: 'Eight', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(8) },
    { arabic: 'Ÿ©', english: '9', wordAr: 'ÿ™ÿ≥ÿπÿ©', wordEn: 'Nine', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(9) },
    { arabic: 'Ÿ°Ÿ†', english: '10', wordAr: 'ÿπÿ¥ÿ±ÿ©', wordEn: 'Ten', image: '<img src="https://emojicdn.elk.sh/üçé?size=30" style="margin:0 2px; width:50px; height:50px;">'.repeat(10) }
];



function displayQuantity() {
    quantityDisplay.innerHTML = currentNumber.image;
}

        // ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
        let currentLanguage = 'arabic';
        let currentNumber = null;
        let correctAnswers = 0;
        let stars = 3;
        let level = 1;
        const numbersPerLevel = 5;
        let soundEnabled = true;
        let gameStarted = false;
        
        // ÿπŸÜÿßÿµÿ± DOM
        const arabicBtn = document.getElementById('arabic-btn');
        const englishBtn = document.getElementById('english-btn');
        const numberDisplay = document.getElementById('number-display');
        const quantityDisplay = document.getElementById('quantity-display');
        const optionsContainer = document.getElementById('options-container');
        const starsContainer = document.getElementById('stars-container');
        const notification = document.getElementById('notification');
        const progressBar = document.getElementById('progress-bar');
        const levelText = document.getElementById('level-text');
        const helpBtn = document.getElementById('help-btn');
        const soundBtn = document.getElementById('sound-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÑÿπÿ®ÿ©
        function initGame() {
            // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ŸÇÿØŸÖ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏
            loadProgress();
            
            updateLanguageButtons();
            updateSoundButton();
            generateNewNumber();
            updateStars();
            updateProgress();
            updateLevelDisplay();
            
            gameStarted = true;
        }
        
        // ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ©
        arabicBtn.addEventListener('click', () => {
            currentLanguage = 'arabic';
            updateLanguageButtons();
            generateNewNumber();
            saveProgress();
        });
        
        englishBtn.addEventListener('click', () => {
            currentLanguage = 'english';
            updateLanguageButtons();
            generateNewNumber();
            saveProgress();
        });
        
        function updateLanguageButtons() {
            arabicBtn.classList.toggle('active', currentLanguage === 'arabic');
            englishBtn.classList.toggle('active', currentLanguage === 'english');
        }
        
        // ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿµŸàÿ™
        soundBtn.addEventListener('click', () => {
            soundEnabled = !soundEnabled;
            updateSoundButton();
            saveProgress();
        });
        
        function updateSoundButton() {
            soundBtn.innerHTML = soundEnabled ? 'ÿßŸÑÿµŸàÿ™ üîà' : 'ÿßŸÑÿµŸàÿ™ üîá';
        }
        
        // ÿ•ÿπÿßÿØÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÑÿπÿ®ÿ©
        resetBtn.addEventListener('click', () => {
            if (confirm('ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ÿπÿßÿØÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÑÿπÿ®ÿ©ÿü ÿ≥ÿ™ŸÅŸÇÿØ ÿ™ŸÇÿØŸÖŸÉ ÿßŸÑÿ≠ÿßŸÑŸä.')) {
                resetGame();
            }
        });
        
        // ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
        helpBtn.addEventListener('click', () => {
            alert(`üéÆ ŸÉŸäŸÅŸäÿ© ÿßŸÑŸÑÿπÿ®:
1. ÿßÿ≥ÿ™ŸÖÿπ ÿ•ŸÑŸâ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ∞Ÿä Ÿäÿ™ŸÖ ŸÜÿ∑ŸÇŸá
2. ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿµÿ≠Ÿäÿ≠ ŸÖŸÜ ÿ®ŸäŸÜ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
3. ŸÉŸÑ 5 ÿ•ÿ¨ÿßÿ®ÿßÿ™ ÿµÿ≠Ÿäÿ≠ÿ© ÿ™ÿ™ŸÇÿØŸÖ ŸÑŸÑŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ™ÿßŸÑŸä
4. ŸÑÿØŸäŸÉ 3 ŸÜÿ¨ŸàŸÖÿå ÿ™ŸÅŸÇÿØ Ÿàÿßÿ≠ÿØÿ© ŸÖÿπ ŸÉŸÑ ÿÆÿ∑ÿ£

üéØ ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™:
- ÿ™ÿπŸÑŸÖ ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸàÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©
- ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÖŸäÿßÿ™ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ•ŸäŸÖŸàÿ¨Ÿäÿ≤
- ŸÜÿ∏ÿßŸÖ ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ŸÖÿ™ÿØÿ±ÿ¨
- ÿ£ÿµŸàÿßÿ™ Ÿàÿ™ÿ¥ÿ¨Ÿäÿπ ÿπŸÜÿØ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©`);
        });
        
        // ÿ™ŸàŸÑŸäÿØ ÿ±ŸÇŸÖ ÿ¨ÿØŸäÿØ Ÿàÿπÿ¥Ÿàÿßÿ¶Ÿä
        function generateNewNumber() {
// ÿ£ÿÆÿ∞ 5 ÿ£ÿ±ŸÇÿßŸÖ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ŸÖŸÜ 0 ÿ•ŸÑŸâ 10
const shuffledNumbers = shuffleArray(numbers.slice()); // ŸÜÿ≥ÿÆÿ© shuffled
const availableNumbers = shuffledNumbers.slice(0, 5); // ÿ£ŸàŸÑ 5 ÿ£ÿ±ŸÇÿßŸÖ
            
            // ÿßÿÆÿ™Ÿäÿßÿ± ÿ±ŸÇŸÖ ÿπÿ¥Ÿàÿßÿ¶Ÿä
            currentNumber = availableNumbers[Math.floor(Math.random() * availableNumbers.length)];
            
            // ÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÇŸÖ
            numberDisplay.textContent = currentNumber[currentLanguage];
            
            // ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÖŸäÿ© ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ•ŸäŸÖŸàÿ¨Ÿäÿ≤
            displayQuantity();
            
            // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿµŸàÿ™ ÿßŸÑÿ±ŸÇŸÖ
            playNumberSound();
            
            // ÿ™ŸàŸÑŸäÿØ ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
            generateOptions(availableNumbers);
        }
  

function isEmojiSupported() {
    try {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        ctx.fillText('üçé', 0, 0);
        return ctx.getImageData(0, 0, 1, 1).data[3] > 0;
    } catch (e) {
        return false;
    }
}
        
        // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿµŸàÿ™ ÿßŸÑÿ±ŸÇŸÖ
        function playNumberSound() {
            if (!soundEnabled || !gameStarted) return;
            
            const soundElement = currentLanguage === 'arabic' 
                ? document.getElementById('number-sound-ar') 
                : document.getElementById('number-sound-en');
            
            // ŸäŸÖŸÉŸÜŸÉ ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿµÿßÿØÿ± ÿ®ŸÖŸÑŸÅÿßÿ™ ÿµŸàÿ™Ÿäÿ© ŸÖÿ≥ÿ¨ŸÑÿ© ŸÖÿ≥ÿ®ŸÇÿßŸã
            soundElement.src = `https://translate.google.com/translate_tts?ie=UTF-8&tl=${
                currentLanguage === 'arabic' ? 'ar' : 'en'
            }&q=${encodeURIComponent(
                currentLanguage === 'arabic' ? currentNumber.wordAr : currentNumber.wordEn
            )}&client=tw-ob`;
            
            soundElement.play().catch(e => console.log("ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿµŸàÿ™:", e));
        }
        
        // ÿ™ŸàŸÑŸäÿØ ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
        function generateOptions(availableNumbers) {
            optionsContainer.innerHTML = '';
            
            // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿµŸÅŸàŸÅÿ© ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿµÿ≠Ÿäÿ≠ Ÿà3 ÿ£ÿ±ŸÇÿßŸÖ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ÿ£ÿÆÿ±Ÿâ
            let options = [currentNumber];
            while (options.length < 4 && options.length < availableNumbers.length) {
                const randomNum = availableNumbers[Math.floor(Math.random() * availableNumbers.length)];
                if (!options.some(opt => opt.arabic === randomNum.arabic)) {
                    options.push(randomNum);
                }
            }
            
            // ÿÆŸÑÿ∑ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
            options = shuffleArray(options);
            
            // ÿ•ŸÜÿ¥ÿßÿ° ÿπŸÜÿßÿµÿ± ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
            options.forEach(num => {
                const option = document.createElement('div');
                option.className = 'number-option';
                option.textContent = num[currentLanguage];
                option.dataset.arabic = num.arabic;
                option.dataset.english = num.english;
                
                // ÿ™ÿ£ÿ´Ÿäÿ± ÿ∏ŸáŸàÿ± ŸÖÿ™ÿØÿ±ÿ¨
                option.style.animation = `fadeIn 0.5s ${options.indexOf(num) * 0.1}s both`;
                
                option.addEventListener('click', () => checkAnswer(num));
                
                optionsContainer.appendChild(option);
            });
        }
        
        // ÿÆŸÑÿ∑ ÿßŸÑŸÖÿµŸÅŸàŸÅÿ©
        function shuffleArray(array) {
            return [...array].sort(() => Math.random() - 0.5);
        }
        
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
        function checkAnswer(selectedNumber) {
            if (selectedNumber.arabic === currentNumber.arabic) {
                // ÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©
                if (soundEnabled) document.getElementById('correct-sound').play();
                correctAnswers++;
                
                // ÿ™ÿ£ÿ´Ÿäÿ± ŸÜÿ¨ÿßÿ≠
                numberDisplay.style.transform = 'scale(1.1)';
                numberDisplay.style.color = '#4CAF50';
                setTimeout(() => {
                    numberDisplay.style.transform = 'scale(1)';
                    numberDisplay.style.color = '#6a5acd';
                }, 500);
                
                // ÿπÿ±ÿ∂ ÿ•ÿ¥ÿπÿßÿ±
                showNotification('ÿ£ÿ≠ÿ≥ŸÜÿ™! ‚úîÔ∏è');
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÇÿØŸÖ
                updateProgress();
                
                // ÿ™ŸàŸÑŸäÿØ ÿ±ŸÇŸÖ ÿ¨ÿØŸäÿØ ÿ®ÿπÿØ ÿ™ÿ£ÿÆŸäÿ± ÿ®ÿ≥Ÿäÿ∑
                setTimeout(() => {
                    if (correctAnswers >= numbersPerLevel) {
                        levelUp();
                    } else {
                        generateNewNumber();
                    }
                }, 1000);
            } else {
                // ÿ•ÿ¨ÿßÿ®ÿ© ÿÆÿßÿ∑ÿ¶ÿ©
                if (soundEnabled) document.getElementById('error-sound').play();
                stars--;
                updateStars();
                
                // ÿ™ÿ£ÿ´Ÿäÿ± ÿÆÿ∑ÿ£
                const selectedOption = [...optionsContainer.children].find(
                    opt => opt.dataset.arabic === selectedNumber.arabic
                );
                if (selectedOption) {
                    selectedOption.style.transform = 'scale(0.9)';
                    selectedOption.style.backgroundColor = '#ff7675';
                    setTimeout(() => {
                        selectedOption.style.transform = 'scale(1)';
                        selectedOption.style.backgroundColor = '#fdcb6e';
                    }, 500);
                }
                
                // ÿπÿ±ÿ∂ ÿ•ÿ¥ÿπÿßÿ± ÿÆÿ∑ÿ£
                showNotification('ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ! ‚ùå', true);
                
                if (stars <= 0) {
                    setTimeout(() => {
                        showNotification('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÜŸÇÿßÿ∑! ÿßÿ®ÿØÿ£ ŸÖŸÜ ÿ¨ÿØŸäÿØ', true);
                        resetGame();
                    }, 1500);
                }
            }
        }
        
        // ÿßŸÑÿ™ŸÇÿØŸÖ ŸÑŸÑŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ™ÿßŸÑŸä
        function levelUp() {
           if (soundEnabled) document.getElementById('levelup-sound').play();
    level++;
    correctAnswers = 0;
    stars = 3; // ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÜÿ¨ŸàŸÖ ÿ•ŸÑŸâ 3 ÿπŸÜÿØ ÿ®ÿØÿ° ŸÖÿ≥ÿ™ŸàŸâ ÿ¨ÿØŸäÿØ
    updateStars();
            
            showNotification(`ÿ™ŸáÿßŸÜŸäŸÜÿß! ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ${level-1} ÿßŸÉÿ™ŸÖŸÑ üéâ`);
            createConfetti();
            updateStars();
            updateProgress();
            updateLevelDisplay();
            saveProgress();
            
            setTimeout(() => {
                generateNewNumber();
            }, 2000);
        }
        
        // ÿ•ŸÜÿ¥ÿßÿ° ÿ™ÿ£ÿ´Ÿäÿ± ŸÉŸàŸÜŸÅŸäÿ™Ÿä
        function createConfetti() {
            const colors = ['#fdcb6e', '#6a5acd', '#4CAF50', '#ff7675', '#a29bfe'];
            const container = document.querySelector('.game-container');
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                container.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÑÿπÿ®ÿ©
        function resetGame() {
            level = 1;
            correctAnswers = 0;
            stars = 3;
            updateStars();
            updateProgress();
            updateLevelDisplay();
            generateNewNumber();
            saveProgress();
        }
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿ¨ŸàŸÖ
function updateStars() {
    starsContainer.innerHTML = '';
    for (let i = 0; i < stars; i++) {
        const star = document.createElement('div');
        star.className = 'star-icon';
        star.textContent = '‚≠ê';
        starsContainer.appendChild(star);
    }
}

        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ™ŸÇÿØŸÖ
        function updateProgress() {
            const progress = (correctAnswers / numbersPerLevel) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ
        function updateLevelDisplay() {
            levelText.textContent = level;
        }
        
        // ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™
        function showNotification(message, isError = false) {
            notification.textContent = message;
            notification.className = 'notification';
            if (isError) notification.classList.add('error');
            
            // ÿ•ŸäŸÖŸàÿ¨Ÿä ÿ≠ÿ≥ÿ® ŸÜŸàÿπ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±
            const emoji = isError ? '‚ùå' : '‚úîÔ∏è';
            notification.innerHTML = `${message} <span style="font-size:1.2em">${emoji}</span>`;
            
            notification.style.opacity = '1';
            notification.style.transform = 'translateX(-50%) translateY(0)';
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(-50%) translateY(-20px)';
            }, 2000);
        }
        
        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ŸÇÿØŸÖ ŸÅŸä localStorage
        function saveProgress() {
            const progress = {
                level,
                currentLanguage,
                soundEnabled
            };
            localStorage.setItem('numberGameProgress', JSON.stringify(progress));
        }
        
        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ŸÇÿØŸÖ ŸÖŸÜ localStorage
        function loadProgress() {
            const savedProgress = localStorage.getItem('numberGameProgress');
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                level = progress.level || 1;
                currentLanguage = progress.currentLanguage || 'arabic';
                soundEnabled = progress.soundEnabled !== undefined ? progress.soundEnabled : true;
            }
        }
        
        // ÿ®ÿØÿ° ÿßŸÑŸÑÿπÿ®ÿ©
        window.onload = initGame;
    </script>
</body>
</html>