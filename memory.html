<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÑÿπÿ®ÿ© ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ŸÑŸÑÿ£ÿ∑ŸÅÿßŸÑ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: #f0f4ff;
            text-align: center;
            margin: 0;
            padding: 20px;
            color: #333;
            min-height: 100vh;
        }
        h1 {
            color: #5d5bff;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .game-container {
            max-width: 600px;
            margin: 20px auto;
            background-color: white;
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .cards-grid {
            display: grid;
            gap: 12px;
            margin: 25px 0;
            justify-content: center;
        }
        .card {
            width: 100%;
            height: 80px;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            cursor: pointer;
            transition: all 0.3s;
            transform-style: preserve-3d;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 3px solid white;
        }
        /* ÿ£ŸÑŸàÿßŸÜ ŸÖÿÆÿ™ŸÑŸÅÿ© ŸÑŸÉŸÑ ÿ®ÿ∑ÿßŸÇÿ© */
        .card:nth-child(1) { background-color: #ff9aa2; }
        .card:nth-child(2) { background-color: #ffb7b2; }
        .card:nth-child(3) { background-color: #ffdac1; }
        .card:nth-child(4) { background-color: #e2f0cb; }
        .card:nth-child(5) { background-color: #b5ead7; }
        .card:nth-child(6) { background-color: #c7ceea; }
        .card:nth-child(7) { background-color: #a2d7ff; }
        .card:nth-child(8) { background-color: #ffc8dd; }
        .card:nth-child(9) { background-color: #cdb4db; }
        .card:nth-child(10) { background-color: #ffafcc; }
        .card:nth-child(11) { background-color: #bde0fe; }
        .card:nth-child(12) { background-color: #a2d2ff; }
        .card:nth-child(13) { background-color: #ffc8dd; }
        .card:nth-child(14) { background-color: #ffafcc; }
        .card:nth-child(15) { background-color: #cdb4db; }
        .card:nth-child(16) { background-color: #a2d7ff; }

        .card.flipped {
            background-color: white;
            transform: rotateY(180deg);
        }
        .card.matched {
            background-color: #55efc4;
            cursor: default;
        }
        .controls {
            margin: 25px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        button {
            background-color: #5d5bff;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        button:hover {
            transform: scale(1.05);
        }
        .help-btn {
            background-color: #ff7675;
        }
        .stars {
            font-size: 2.5em;
            margin: 15px 0;
            color: #fdcb6e;
        }
        .level-selector {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .level-btn {
            background-color: #00cec9;
        }
        @media (max-width: 600px) {
            .card {
                height: 70px;
                font-size: 2.5em;
            }
        }
        .notification {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #4CAF50;
        color: white;
        padding: 15px 25px;
        border-radius: 50px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.5s;
    }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ŸÑÿπÿ®ÿ© ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© üß†‚ú®</h1>
        <p>ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿµÿπŸàÿ®ÿ© Ÿàÿßÿ®ÿØÿ£ ÿßŸÑŸÑÿπÿ®!</p>
        
        <div class="level-selector">
            <button class="level-btn" onclick="startGame(2, 2)">ÿ≥ŸáŸÑ (4 ÿ£ÿ≤Ÿàÿßÿ¨)</button>
            <button class="level-btn" onclick="startGame(2, 4)">ŸÖÿ™Ÿàÿ≥ÿ∑ (8 ÿ£ÿ≤Ÿàÿßÿ¨)</button>
            <button class="level-btn" onclick="startGame(4, 4)">ÿµÿπÿ® (16 ÿ≤Ÿàÿ¨)</button>
        </div>
        
        <div class="stars">‚≠ê‚≠ê‚≠ê</div>
        <div class="cards-grid" id="cards-grid"></div>
        
        <div class="controls">
            <button onclick="startGame(currentCols, currentRows)">ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÑÿπÿ®</button>
            <button class="help-btn" onclick="showHint()">ŸÖÿ≥ÿßÿπÿØÿ©</button>
        </div>
        
        <audio id="flip-sound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3"></audio>
        <audio id="match-sound" src="https://www.soundjay.com/buttons/sounds/button-02.mp3"></audio>
        <audio id="win-sound" src="https://www.soundjay.com/buttons/sounds/button-21.mp3"></audio>
    </div>

    <script>
        // ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let currentCols = 2;
        let currentRows = 2;
        let stars = 3;
        let moves = 0;
        
        // ÿµŸàÿ± ŸÑŸÑÿ£ÿ≤Ÿàÿßÿ¨ (ÿ•ŸäŸÖŸàÿ¨Ÿäÿßÿ™ ŸÖÿ™ŸÜŸàÿπÿ©)
        const images = [
            'üê∂', 'üê±', 'üê≠', 'üêπ', 'üê∞', 'ü¶ä', 'üêª', 'üêº',
            'üçé', 'üçå', 'üçí', 'üçì', 'üçê', 'üçä', 'üçã', 'üçâ',
            'üöó', '‚úàÔ∏è', 'üö≤', 'üöÄ', 'üöë', 'üöí', 'üöú', 'üöÅ',
            '‚≠ê', 'üåà', '‚òÄÔ∏è', 'üåô', '‚ö°', '‚ùÑÔ∏è', 'üíß', 'üî•'
        ];
        
        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÑÿπÿ®ÿ©
        function startGame(cols, rows) {
            loadStars();
            currentCols = cols;
            currentRows = rows;
            const totalPairs = cols * rows / 2;
            matchedPairs = 0;
            moves = 0;
            stars = 3;
            flippedCards = [];
            
            document.querySelector('.stars').textContent = '‚≠ê‚≠ê‚≠ê';
            document.getElementById('cards-grid').innerHTML = '';
            
            // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑÿ£ÿ≤Ÿàÿßÿ¨
            const pairs = images.slice(0, totalPairs);
            cards = [...pairs, ...pairs];
            
            // ÿÆŸÑÿ∑ ÿßŸÑÿ£Ÿàÿ±ÿßŸÇ
            shuffleArray(cards);
            
            // ÿπÿ±ÿ∂ ÿßŸÑÿ£Ÿàÿ±ÿßŸÇ
            renderCards(cols, rows);
        }
        
        // ÿÆŸÑÿ∑ ÿßŸÑÿ£Ÿàÿ±ÿßŸÇ
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // ÿπÿ±ÿ∂ ÿßŸÑÿ£Ÿàÿ±ÿßŸÇ
        function renderCards(cols, rows) {
            const grid = document.getElementById('cards-grid');
            grid.innerHTML = '';
            
            // ÿ™ÿ≠ÿØŸäÿØ ÿπÿØÿØ ÿßŸÑÿ£ÿπŸÖÿØÿ© ŸàÿßŸÑÿµŸÅŸàŸÅ
            grid.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            grid.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
            
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');
                cardElement.dataset.index = index;
                cardElement.dataset.value = card;
                cardElement.addEventListener('click', flipCard);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸàÿ±ŸÇÿ© (ÿ≥ÿ™ÿ∏Ÿáÿ± ÿπŸÜÿØ ÿßŸÑÿ™ŸÇŸÑŸäÿ®)
                const content = document.createElement('div');
                content.textContent = card;
                content.style.display = 'none';
                cardElement.appendChild(content);
                
                grid.appendChild(cardElement);
            });
        }
        
        // ŸÇŸÑÿ® ÿßŸÑŸàÿ±ŸÇÿ©
        function flipCard() {
            const card = this;
            
            // ŸÑÿß ÿ™ŸÅÿπŸÑ ÿ¥Ÿäÿ¶ÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑŸàÿ±ŸÇÿ© ŸÖŸÇŸÑŸàÿ®ÿ© ÿ£Ÿà ŸÖÿ∑ÿßÿ®ŸÇÿ©
            if (card.classList.contains('flipped')) return;
            if (flippedCards.length >= 2) return;
            
            // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿµŸàÿ™ ÿßŸÑŸÇŸÑÿ®
            document.getElementById('flip-sound').play();
            
            // ÿπÿ±ÿ∂ ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸàÿ±ŸÇÿ©
            card.classList.add('flipped');
            card.querySelector('div').style.display = 'block';
            flippedCards.push(card);
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿßÿ®ŸÇ
            if (flippedCards.length === 2) {
                moves++;
                updateStars();
                
                if (flippedCards[0].dataset.value === flippedCards[1].dataset.value) {
                    // ÿ™ÿ∑ÿßÿ®ŸÇ ŸÜÿßÿ¨ÿ≠
                    setTimeout(() => {
                        flippedCards.forEach(c => {
                            c.classList.add('matched');
                            c.removeEventListener('click', flipCard);
                        });
                        
                        // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿµŸàÿ™ ÿßŸÑŸÖÿ∑ÿßÿ®ŸÇÿ© ŸáŸÜÿß
                        document.getElementById('match-sound').play();
                        
                        flippedCards = [];
                        matchedPairs++;
                        
                        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÅŸàÿ≤
                        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÅŸàÿ≤
if (matchedPairs === (currentCols * currentRows / 2)) {
    setTimeout(() => {
        document.getElementById('win-sound').play();
        showNotification(`ŸÖÿ®ÿ±ŸàŸÉ! ŸÅÿ≤ÿ™ ÿ®${stars} ŸÜÿ¨ŸàŸÖ! üéâ`);
    }, 500);
}
                    }, 500);
                } else {
    // ŸÑÿß ÿ™ÿ∑ÿßÿ®ŸÇ ‚áí ŸÜŸÇÿµ ŸÜÿ¨ŸÖÿ©
  if (stars > 0) {
    stars--;
    updateStars();

    if (stars === 0) {
        setTimeout(() => {
            showNotification("ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÜÿ¨ŸàŸÖ! ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÑÿπÿ®ÿ© üîÅ");
            startGame(currentCols, currentRows);
        }, 1000); // ŸÖŸáŸÑÿ© ÿµÿ∫Ÿäÿ±ÿ© ŸÇÿ®ŸÑ ÿßŸÑÿ•ÿπÿßÿØÿ©
    }
}

    setTimeout(() => {
        flippedCards.forEach(c => {
            c.classList.remove('flipped');
            c.querySelector('div').style.display = 'none';
        });
        flippedCards = [];
    }, 1000);
}

            }
        }
        
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿ¨ŸàŸÖ ÿ≠ÿ≥ÿ® ÿßŸÑÿ£ÿØÿßÿ°
function updateStars() {
    document.querySelector('.stars').textContent = '‚≠ê'.repeat(stars);
}

function showNotification(message) {
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.style.opacity = '1';
    
    setTimeout(() => {
        notification.style.opacity = '0';
    }, 2000);
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿ¨ŸàŸÖ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿπŸÜÿØ ÿ®ÿØÿ° ÿßŸÑŸÑÿπÿ®ÿ©
function loadStars() {
    const savedStars = localStorage.getItem('memoryGameStars');
    if (savedStars) {
        stars = parseInt(savedStars);
        document.querySelector('.stars').textContent = '‚≠ê'.repeat(stars);
    }
}
        
        // ÿπÿ±ÿ∂ ŸÖÿ≥ÿßÿπÿØÿ© (ÿ™ŸÑŸÖŸäÿ≠)
        function showHint() {
            if (flippedCards.length !== 0) return;
            
            const unmatchedCards = Array.from(document.querySelectorAll('.card:not(.matched):not(.flipped)'));
            
            if (unmatchedCards.length > 1) {
                // ÿ•ÿ∏Ÿáÿßÿ± ÿ≤Ÿàÿ¨ŸäŸÜ ÿ∫Ÿäÿ± ŸÖÿ™ÿ∑ÿßÿ®ŸÇŸäŸÜ ŸÑŸÖÿØÿ© ÿ´ÿßŸÜŸäÿ©
                const card1 = unmatchedCards[0];
                const card2 = unmatchedCards.find(c => 
                    c.dataset.value === card1.dataset.value && c !== card1
                ) || unmatchedCards[1];
                
                card1.classList.add('flipped');
                card1.querySelector('div').style.display = 'block';
                card2.classList.add('flipped');
                card2.querySelector('div').style.display = 'block';
                
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card1.querySelector('div').style.display = 'none';
                    card2.classList.remove('flipped');
                    card2.querySelector('div').style.display = 'none';
                }, 1000);
            }
        }
        
        // ÿ®ÿØÿ° ÿßŸÑŸÑÿπÿ®ÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ®ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ≥ŸáŸÑ
        window.onload = () => startGame(2, 2);
    </script>
    <div id="notification" class="notification"></div>
</body>
</html>